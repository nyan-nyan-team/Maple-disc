<div class= "container">
<h1>商品詳細</h1>
<div class= "row">
<div class= "col-sm-4">
<div>
<%= attachment_image_tag @product, :image, :fill, 100, 100, fallback: "default_product.jpg" , size:'100x100' %>
</div>
</div>
<%# 在庫数の計算式です。 %>
<% productquantity = @product.total_arrival_quantity - @product.total_order_detail_quantity %>

<%= form_for(@cart_product, url: cart_products_path, method: :POST) do |product| %> 
<div class= "col-sm-8">
<%= product.hidden_field :product_id, value: @product.id %>
<%= product.number_field :quantity, min: 0,max: productquantity %>
<br><br>
<%= product.submit "カートに追加" %>
<% end %> 
</div>
</div>

<div class= "container">
<hr>
<div>商品名</div>
<%= @product.title %>

<div>価格</div>
<%= @product.amount %>

<div>在庫数</div>
<%= productquantity %>

<div>販売状況</div>
<% if productquantity == 0 %>
<div>売り切れ</div>
<% else %>
<div>販売中</div>
<% end %>

<div>アーティスト</div>
<%= @product.artist.artist_name %>

<div>レーベル</div>
<%= @product.label.label_name %>

<div>ジャンル</div>
<%= @product.genre.genre_name %>


<div>ディスク名</div>
<% @product.discs.each do |disc| %> 
<%= disc.disc_number %>
<div>収録曲一覧</div>
<% disc.musics.each do |music| %> 
<%= music.music_name %> 
<% end %> 
<% end %> 


<div>商品紹介</div>
<div>
<%= @product.explanation %>
</div>


</div>